jQuery(document).ready(function(c){resizeCharts();c(".toggler").click(function(h,i){c(this).next().slideToggle()});init2();wavesurfer=WaveSurfer.create({container:"#waveform",waveColor:"violet",progressColor:"purple"});var g=function(h){return[Math.floor((h%3600)/60),("00"+Math.floor(h%60)).slice(-2)].join(":")};wavesurfer.on("audioprocess",function(){if(c("#waveform_counter").length>0){c("#waveform_counter").text(g(wavesurfer.getCurrentTime()))}});wavesurfer.on("ready",function(){if(c("#waveform_duration").length>0){c("#waveform_duration").text(g(wavesurfer.getDuration()))}});var b=document.querySelector("#slider");b.oninput=function(){var h=Number(b.value);wavesurfer.zoom(h)};var d=300,f=1200,a=700,e=c(".cd-top");c(window).scroll(function(){(c(this).scrollTop()>d)?e.addClass("cd-is-visible"):e.removeClass("cd-is-visible cd-fade-out");if(c(this).scrollTop()>f){e.addClass("cd-fade-out")}clearTimeout(c.data(this,"scrollTimer"));c.data(this,"scrollTimer",setTimeout(function(){e.removeClass("cd-is-visible cd-fade-out")},5000))});e.on("click",function(h){h.preventDefault();c("body,html").animate({scrollTop:0},a)})});function initDataTable(){dtable=new Object();$("table.dattab").each(function(){tabid=$(this).attr("id");reportName=$("#"+tabid).find("caption").text().trim();if($(this).find("tbody tr").length>0){orientation="portrait";if($(this).find("tbody tr:first td").length>7){orientation="landscape"}dtable[tabid]=$(this).DataTable({bInfo:false,mark:true,stateSave:true,buttons:[{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel",title:reportName,className:"helpleft"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV",title:reportName,className:"helpleft"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',orientation:orientation,titleAttr:"PDF",title:reportName,className:"helpleft"},{extend:"colvis",text:'<i class="fa fa-eye"></i>',className:"helpleft",titleAttr:idiom.jscolumnvisibility}],dom:"<'row'<'col-sm-6'Bl><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",language:datatablelanguage})}});if(typeof postInitTable=="function"){postInitTable()}$(".helpleft").tipTip({defaultPosition:"left"});$(".helpright").tipTip({defaultPosition:"right"});$(".helptop").tipTip({defaultPosition:"top"})}function resizeCharts(){$(".resizeDiv").each(function(index){var ancho=$(this).width();var alto=Math.floor(ancho/1.6);$(this).height(alto);var elechart=$(this).children(":first-child").attr("id");$(this).children(":first-child").empty();var plotchart="plot"+elechart;$("#"+elechart).height(alto*0.93);try{eval(plotchart+".replot({});")}catch(error){debug("no chart "+error)}})}$(window).resize(function(){resizeCharts()});function getQueryParameter(e){var d="";var b=window.location.href;if(b.indexOf("?")>-1){pos=b.indexOf("?")+1;var a=b.substr(pos).toLowerCase();var c=a.parseQueryString();d=c[e]}if(d===undefined){d=""}return d}function init2(){if($("#day1").length>0){dateChange("day1","month1","year1");dateChange("day2","month2","year2")}if(error_type!=""){popalert(error_type,error_text)}$(".helpleft").tipTip({defaultPosition:"left"});$(".helpright").tipTip({defaultPosition:"right"});$(".helptop").tipTip({defaultPosition:"top"})}function List_move_around(d,b,c){if(d=="right"){if(c=="queues"){if($("#queueselectionavailable").is(":visible")){box1="List_Queue_available";box2="List_Queue[]"}else{box1="List_Group_available";box2="List_Group[]"}}else{box1="List_Agent_available";box2="List_Agent[]"}}else{if(c=="queues"){if($("#queueselectionavailable").is(":visible")){box1="List_Queue[]";box2="List_Queue_available"}else{box1="List_Group[]";box2="List_Group_available"}}else{box1="List_Agent[]";box2="List_Agent_available"}}for(var a=0;a<document.forms[0].elements[box1].length;a++){if((document.forms[0].elements[box1][a].selected||b)){document.forms[0].elements[box2].options[document.forms[0].elements[box2].length]=new Option(document.forms[0].elements[box1].options[a].text,document.forms[0].elements[box1][a].value);document.forms[0].elements[box1][a]=null;a--}}return false}function List_Queue_check_submit(){if($("#queueselectionavailable").is(":visible")){box="List_Queue[]";if(document.forms[0].elements[box]){for(var a=0;a<document.forms[0].elements[box].length;a++){document.forms[0].elements[box][a].selected=true}}}else{box="List_Group[]";if(document.forms[0].elements[box]){for(var a=0;a<document.forms[0].elements[box].length;a++){document.forms[0].elements[box][a].selected=true}}}box="List_Agent[]";if(document.forms[0].elements[box]){for(var a=0;a<document.forms[0].elements[box].length;a++){document.forms[0].elements[box][a].selected=true}}return true}function envia(){List_Queue_check_submit();if($("#queueselectionavailable").is(":visible")){box="List_Queue[]";if(document.forms[0].elements[box].length==0){popalert("warning","You must select at least one queue");return false}}else{box="List_Group[]";if(document.forms[0].elements[box].length==0){popalert("warning","You must select at least one group");return false}}box="List_Agent[]";if(document.forms[0].elements[box].length==0){popalert("warning","You must select at least one agent");return false}year_s=$("#year1").val();month_s=parseInt($("#month1").val())+1;day_s=$("#day1").val();if(String(month_s).length==1){month_s="0"+month_s}if(String(day_s).length==1){day_s="0"+day_s}fecha_s=year_s+"-"+month_s+"-"+day_s+" 00:00:00";fecha_check_s=year_s+month_s+day_s;year_e=$("#year2").val();month_e=parseInt($("#month2").val())+1;day_e=$("#day2").val();if(String(month_e).length==1){month_e="0"+month_e}if(String(day_e).length==1){day_e="0"+day_e}fecha_e=year_e+"-"+month_e+"-"+day_e+" 23:59:59";fecha_check_e=year_e+month_e+day_e;$("#start").val(fecha_s);$("#end").val(fecha_e);hour1=$("#hour1").val();hour2=$("#hour2").val();min1=$("#minute1").val();min2=$("#minute2").val();sec1="00";if(min2=="59"){sec2="59"}else{sec2="00"}hcomp1=hour1+""+min1+""+sec1;hcomp2=hour2+""+min2+""+sec2;seconds_start=(hour1*60*60)+(min1*60)+parseInt(sec1);seconds_end=(hour2*60*60)+(min2*60)+parseInt(sec2);$("#secondsstart").val(seconds_start);$("#secondsend").val(seconds_end);if(hcomp1>=hcomp2){popalert("warning","Invalid Hour");return false}if(fecha_check_e<fecha_check_s){popalert("warning","Invalid Date");return false}else{document.forms[0].submit()}return false}function licname(a){document.getElementById("licensename").innerHTML=a}function setdates(a,b){var i=a.substr(0,4);var f=a.substr(5,2);var c=a.substr(8,2);var d=b.substr(0,4);var g=b.substr(5,2);var h=b.substr(8,2);dstart=MWJ_findSelect("day1"),mstart=MWJ_findSelect("month1"),ystart=MWJ_findSelect("year1");dend=MWJ_findSelect("day2"),mend=MWJ_findSelect("month2"),yend=MWJ_findSelect("year2");hour1=MWJ_findSelect("hour1");minute1=MWJ_findSelect("minute1");hour2=MWJ_findSelect("hour2");minute2=MWJ_findSelect("minute2");while(dstart.options.length){dstart.options[0]=null}while(dend.options.length){dend.options[0]=null}for(var e=0;e<31;e++){dstart.options[e]=new Option(e+1,e+1)}for(var e=0;e<31;e++){dend.options[e]=new Option(e+1,e+1)}e=c-1;y=h-1;dstart.options[e].selected=true;dend.options[y].selected=true;e=f-1;y=g-1;mstart.options[e].selected=true;mend.options[y].selected=true;for(var e=0;e<ystart.options.length;e++){if(ystart.options[e].value==""+i+""){ystart.options[e].selected=true;if(window.opera&&document.importNode){window.setTimeout("MWJ_findSelect( '"+ystart.name+"' ).options["+e+"].selected = true;",0)}}}for(var e=0;e<yend.options.length;e++){if(yend.options[e].value==""+d+""){yend.options[e].selected=true;if(window.opera&&document.importNode){window.setTimeout("MWJ_findSelect( '"+yend.name+"' ).options["+e+"].selected = true;",0)}}}$("#day1").trigger("chosen:updated");$("#day2").trigger("chosen:updated");$("#month1").trigger("chosen:updated");$("#month2").trigger("chosen:updated");$("#year1").trigger("chosen:updated");$("#year2").trigger("chosen:updated");$("#hour1").trigger("chosen:updated");$("#hour2").trigger("chosen:updated");$("#minute1").trigger("chosen:updated");$("#minute2").trigger("chosen:updated")}function pagupdate(e,g,f,b,d){debug("pagupdate");var a=$(d).parent().parent().parent().parent().parent().parent().parent().parent();if(g.indexOf("detail")>-1){a=$(d).parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().parent().parent()}var c="report="+g+"&type=HTML&pagina="+f;if(b!="undefined"){c+="&"+b}$("#loader").show();$(a).fadeTo("fast",0.01,function(){$.post(e,c,function(h){$(a).empty().append($(h)).fadeTo("fast",1);$("#loader").hide();$(a).find(".helpleft").each(function(i,j){if($(j).attr("data-original-title")!="undefined"){$(j).attr("title",$(j).attr("data-original-title"));$(j).attr("data-original-title","")}});$(a).find(".helpright").each(function(i,j){if($(j).attr("data-original-title")!="undefined"){$(j).attr("title",$(j).attr("data-original-title"));$(j).attr("data-original-title","")}});$(a).find(".helptop").each(function(i,j){if($(j).attr("data-original-title")!="undefined"){$(j).attr("title",$(j).attr("data-original-title"));$(j).attr("data-original-title","")}});$(a).find(".helpleft").unbind("hover").tipTip({defaultPosition:"left"});$(a).find(".helptop").unbind("hover").tipTip({defaultPosition:"top"});$(a).find(".helpright").unbind("hover").tipTip({defaultPosition:"right"})})});return false}function ajupdate(d,e,b){debug("ajupdate pagina "+d+" objeto "+e);elem=$("#"+e);debug(elem);load=$("#loader");if(elem.css("display")=="none"){load.show();var a=d;var c=b;$("#content"+e).load(d,b,function(){$("#loader").hide();$("#"+e).fadeIn()})}else{elem.fadeOut();load.css("display","none")}}function getHiddenSize(a){if(a.css("display")!="none"){return new Array(a.outerWidth(),a.outerHeight())}else{a.css("display","none");return new Array(a.outerWidth(),a.outerHeight())}}function popalert(a,b){jQuery.ajax({url:basehref+"ajax-message.php",data:{message:b,tipo:a},dataType:"script"});return false}function debug(a){if(window.console!==undefined){console.log(a)}}function filter_clid(a){filterReport=a;var b=$.prompt(idiom.Filter+':  <input type=text class="form-control" id=filtertt name=filtertt value="'+$("#ftt").val()+'">',{buttons:{Ok:1,Reset:2}});b.bind("promptloaded",function(d,f,e,c){$("#filtertt").focus()});b.bind("promptsubmit",function(d,g,f,c){if(g==1){var e="filter=clid:"+$("#filtertt").val();$("#ftt").val($("#filtertt").val());pagupdate("export.php",filterReport,"1",e)}else{$("#filtertt").val("");$("#ftt").val("");return false}})}function export_submit(a){cual="";report="";$("#"+a).find("input").each(function(b,c){if(c.name=="report"){report=c.value}});$("#"+a).find("button").each(function(b,c){if($(c).attr("name")=="click"){cual=$(c).attr("data-alt");$(c).attr("name","")}});if(cual=="pdf"){$("#"+a).find(".type").each(function(){$(this).val("pdf")});return true}if(cual=="csv"){$("#"+a).find(".type").each(function(){$(this).val("csv")});return true}return false}function msAddScript(a,b){eltScript=document.createElement("script");eltScript.setAttribute("type","text/javascript");if(a.indexOf("?")>-1){a+="&"}else{a+="?"}if(b===undefined){a+="rand="+Math.random()}else{a+="rand="+b}eltScript.setAttribute("src",a);document.getElementsByTagName("head")[0].appendChild(eltScript)}function wavPlay(b,a){debug($("div#"+a));if($("div#"+a).hasClass("playicon")){debug("play "+b);window.TinyWav.Play("download.php?file="+b,a)}else{debug("pause "+b);window.TinyWav.Pause(b,a)}}function wavplay(b,c,a){$("#bplay").prop("disabled",true);$("#bpause").prop("disabled",true);wavesurfer.load(b);$("#audiofile").attr("href",b);$("#wavplayer").modal();wavesurfer.on("ready",function(){$("#bplay").prop("disabled",false);$("#bpause").prop("disabled",false);wavesurfer.play()})};